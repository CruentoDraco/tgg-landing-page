<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#343a40" />
        <meta name="description" content="Home of TheGangGang"/>
        <meta name="copyright" content="TheGangGang" />
        <title>TheGangGang</title>
        <script>
            twitchHighlights = {
                0: {"link": "https://player.twitch.tv/?enableExtensions=true&muted=false&parent=twitch.tv&player=popout&t=0h0m2s&video=1032771213&volume=0"},
                1: {"link": "https://player.twitch.tv/?enableExtensions=true&muted=false&parent=twitch.tv&player=popout&t=0h16m49s&video=1032510989&volume=0" },
                
            }
            //Live or NotLive
            var mode ="NotLive";
            $('document').ready(function(){
                var embed = new Twitch.Embed("twitch-embed", {
                    width: "100%",
                    height: 750,
                    channel: "theganggangoffical",
                    layout: "video-with-chat",
                    autoplay: true,
                    muted: true
                });
                embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
                    var player = embed.getPlayer();
                    player.play();
                });
                var channelID = "UCiUoU8QWGiJWw9ZyZqsC5vA";
                var reqURL = "https://www.youtube.com/feeds/videos.xml?channel_id=";
                $.getJSON("https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(reqURL)+channelID, function(data) {
                    var link = data.items[0].link;
                    var id = link.substr(link.indexOf("=")+1);
                    $("#youtube_video").attr("src","https://youtube.com/embed/"+id + "?controls=0&showinfo=0&rel=0");
                });
                switch (mode){
                    case "Live":
                    $('#twitch-embed').show();
                    break;
                    case "NotLive":
                        $('#twitch-highlight').show();
                        var i = Math.floor(Math.random() * 2);
                        document.getElementById("twitch-highlight").setAttribute("src", twitchHighlights[i].link);
                    break;
                }
            });
        </script>
    </head>
    <style>
        .none{
            display: none;
        }
        .card{
            border-color: #800080;
        }
        .card-title{
            color: #800080;
        }
    </style>
    <body>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"> Twitch</h5>
                <div id="twitch-embed" style="display:none;"></div>
                <iframe id="twitch-highlight" width="100%" height="750" style="display:none;"></iframe>            
            </div>
        </div>
        <div class="col-md-12">&nbsp;</div>
        <!--<div class="card">
            <div class="card-body">
                <h5 class="card-title"> Stream Ank√ºndigungen</h5>          
            </div>
        </div>
        <div class="col-md-12">&nbsp;</div>-->
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"> Youtube</h5>
                <iframe id="youtube_video" width="100%" height="750" frameborder="0" allowfullscreen></iframe>          
            </div>
        </div>
    </body>
</html>
